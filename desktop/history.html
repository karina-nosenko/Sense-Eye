<!DOCTYPE html>
<html>
<head>
	<title>My Page</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		body {
			background-color: #f8f8f8;
			font-family: sans-serif;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			height: 100vh;
		}
		button {
			padding: 10px 20px;
			font-size: 18px;
			border: none;
			background-color: #333;
			color: #fff;
			cursor: pointer;
			border-radius: 4px;
			margin: 10px;
			box-shadow: 0 5px 10px rgba(0,0,0,0.2);
			transition: all 0.3s ease;
		}
		button:hover {
			background-color: #222;
			transform: translateY(-5px);
			box-shadow: 0 10px 20px rgba(0,0,0,0.2);
		}
	</style>
</head>
<body>
	<h1>My Camera History</h1>
	<div id="videos-container"></div>

	<script>
		function createVideoWindow(videoUrl) {
			const newWindow = window.open("", "", "width=600,height=400");
			newWindow.document.body.innerHTML = `
				<video width="100%" height="100%" controls autoplay>
					<source src="${videoUrl}" type="video/mp4">
					Your browser does not support the video tag.
				</video>
			`;
		}
        function getCurrentDirAbsolutePath() {
            let pathArray = window.location.pathname.split('/');
            pathArray.pop();
            let dirPath = window.location.origin + pathArray.join('/');
            return dirPath;
        }
		function listOfVideos(timestamps) {
			const container = document.getElementById("videos-container");
			container.innerHTML = "";
    
			myAPI.getOutputVideos()
			.then((resonse) => {
				console.log('history:'+resonse)
			});

			timestamps.forEach((timestamp, index) => {
				const button = document.createElement("button");
				button.innerText = `${timestamp}`;
				button.addEventListener("click", () => {
                    console.log(getCurrentDirAbsolutePath())
					createVideoWindow(`${getCurrentDirAbsolutePath()}/../../output_videos/output.mp4`);
				});
				container.appendChild(button);
			});
		}

		const timestamps = [
			"2022-01-01 12:00:00",
			"2022-01-02 12:00:00",
			"2022-01-03 12:00:00",
			"2022-01-04 12:00:00",
			"2022-01-05 12:00:00",
			"2022-01-06 12:00:00",
			"2022-01-07 12:00:00",
			"2022-01-08 12:00:00",
			"2022-01-09 12:00:00",
			"2022-01-10 12:00:00",
			"2022-01-11 12:00:00",
			"2022-01-12 12:00:00",
		];

		listOfVideos(timestamps);
	</script>
</body>
</html>
